var canvasClock={ctx:document.getElementById("drawing").getContext("2d"),init:function(){this.ctx.strokeStyle="#000",this.ctx.fillStyle="#000",this.ctx.font="bold 14px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.lineWidth=2},clear:function(){this.ctx.translate(-100,-100),this.ctx.clearRect(0,0,200,200)},drawBackground:function(){var t;this.ctx.beginPath(),this.ctx.translate(100,100),this.ctx.arc(0,0,3,0,2*Math.PI),this.ctx.fill(),this.ctx.moveTo(99,0),this.ctx.arc(0,0,99,0,2*Math.PI),this.ctx.moveTo(94,0),this.ctx.arc(0,0,94,0,2*Math.PI);for(var e=1;e<=12;e+=1)t=e*Math.PI/6,this.ctx.moveTo(94*Math.sin(t),94*-Math.cos(t)),this.ctx.lineTo(89*Math.sin(t),89*-Math.cos(t)),this.ctx.fillText(String(e),80*Math.sin(t),80*-Math.cos(t));this.ctx.closePath()},drawContext:function(){var t=new Date,e=t.getSeconds()/60*2*Math.PI,n=t.getMinutes()/60*2*Math.PI,i=t.getHours()%12/12*2*Math.PI;this.drawBackground(),this.ctx.closePath(),this.ctx.moveTo(0,0),this.ctx.lineTo(50*Math.sin(i),50*-Math.cos(i)),this.ctx.moveTo(0,0),this.ctx.lineTo(70*Math.sin(n),70*-Math.cos(n)),this.ctx.moveTo(0,0),this.ctx.lineTo(85*Math.sin(e),85*-Math.cos(e)),this.ctx.stroke()},run:function(){var t=this;this.init(),this.drawContext(),setInterval(function(){t.clear(),t.drawContext()},1e3)}},contact={icon:$("#icon-contact"),info:$("#info-contact"),contact:$("#index-contact"),mail:$("#mail-to"),text:$("#mail-to").find("textarea"),a:$("#mail-to").find("a"),href:"",url:"",screen:0,run:function(){var t=this,e=function(e){t.url=e.target.style.background,t.url.indexOf("mail")>-1?(t.info.css("background","none"),t.info.text("fuyi1205@126.com"),t.mail.slideDown()):(t.info.text(""),t.mail.slideUp(),t.url.indexOf("qq")>-1&&t.info.css("background","url('src/img/info/qq.jpg') center"),t.url.indexOf("weixin")>-1&&t.info.css("background","url('src/img/info/weixin.png') center"),t.url.indexOf("weibo")>-1&&t.info.css("background","url('src/img/info/weibo.png') center"))},n=function(e){t.url=e.target.style.background,t.info.css("background","none"),t.url.indexOf("mail")==-1&&t.info.css({background:'url("src/img/info/face.png")'}).text("")},i=function(){t.mail.slideUp(),t.info.css({background:'url("src/img/info/face.png")'}).text("")},o=function(){0==t.text.val().length?alert("hey!一言不发我很伤心~"):(t.href=a.attr("href"),t.href=this.href+"?subject="+encodeURIComponent("对博客的建议")+"&body="+encodeURIComponent(t.text.val()),t.a.attr("href",info))},c=function(){t.text.val(""),t.a.attr("href","mailto:fuyi1205@126.com?subject=对博客的建议")};document.documentElement.offsetWidth>768?this.icon.delegate("li","mouseenter",e).delegate("li","mouseleave",n):this.icon.delegate("li","touchstart",e).delegate("li","touchend",n),this.contact.on("mouseleave",i),this.mail.delegate("a","mousedown",o).delegate("button:eq(1)","click",c)}};!function(){var t=null,e=null,n=$(".dropdown");$(document).on("mousedown","a.dropdown-desktop",function(){var t=$(this).attr("href");switch(t){case"/blog/":window.location.pathname="/blog/";break;case"/tank/":window.location.pathname="/tank/";break;case"/san/":window.location.pathname="/san/"}}).on("mouseenter","a.dropdown-desktop",function(){clearTimeout(t);var e=$(this);t=setTimeout(function(){e.next().slideDown()},100)}).on("mouseleave",".view-desktop .dropdown",function(){clearTimeout(e),e=setTimeout(function(){n.find("ul").slideUp()},100)});var i=window.location.pathname,o=/\/\d{4}\/\d{2}\/\d{2}\/\w+\.html/;switch(n.prev().removeClass("active"),n.removeClass("active"),i){case"/":n.eq(0).prev().addClass("active");break;case"/blog/":n.eq(0).addClass("active"),$("#show-info").addClass("active");break;case"/tank/":n.eq(1).addClass("active"),n.eq(1).find("li").eq(0).addClass("active");break;case"/san/":n.eq(2).addClass("active"),n.eq(2).find("li").eq(0).addClass("active")}o.test(i)&&n.eq(0).addClass("active")}(),function(){if(window.location.pathname.indexOf("blog")>0){var t=$(".article-h3"),e=$(".article-date");t.find(".con-title, .con-date").hide(),t.find(".con-content").find("*").not("h3").hide();for(var n=0,i=e.length;n<i;n++)e.eq(n).text(e.eq(n).text().substring(0,10));$("#hide-info").click(function(){t.slideUp(200),$(this).prev().removeClass("active"),$(this).addClass("active")}),$("#show-info").click(function(){t.slideDown(200),$(this).next().removeClass("active"),$(this).addClass("active")});var o={key:$("#search-key"),button1:$("#search-button"),button2:$("#reset-button"),articles:$(".article-li"),titles:$(".article-title"),result:!1,start:function(){if(0==o.key.val().length)alert("请输入搜索内容！");else{for(var t=0,e=o.titles.length;t<e;t++)o.titles.eq(t).text().toLowerCase().indexOf(o.key.val().toLowerCase())==-1?o.articles.eq(t).hide():o.result=!0;0==o.result&&(o.articles.show(),alert("没有符合条件的博文！"))}}};$("#blog-search").delegate("#search-button","click",function(){o.start()}).delegate("input","keydown",function(t){13==t.keyCode&&o.start()}).delegate("#reset-button","click",function(){o.articles.show()})}}(),function(){if(window.location.pathname.indexOf("san")!=-1){var t=$(".grid").masonry({itemSelector:".grid-item",percentPosition:!0,columnWidth:".grid-sizer"});t.imagesLoaded().progress(function(){t.masonry()})}}(),function(){$(document).on("click","#register-login-btn",function(){$(".log-form").fadeToggle()}).on("click",".shut-login",function(){$(".log-form").fadeOut()})}(),function(){var t=$("#canvas-clock");"/"==window.location.pathname&&(t.fadeIn(),contact.run()),canvasClock.run(),$(document).on("click","#toggle-canvas-clock",function(){t.fadeToggle(),"/"!==window.location.pathname&&$(".bg-con").toggleClass("bg-con-opac")})}();var myAngular=angular.module("MyBlog",["ngAnimate"]);myAngular.config(["$interpolateProvider",function(t){return t.startSymbol("{(").endSymbol(")}")}]),myAngular.controller("sanCtrl",["$scope","$http",function(t,e){t.getInfo=function(){e.get("/dist/json/s11.json").success(function(e){var n=window.location.href.substr(-1,1);t.info=e,t.item=t.info[n],t.toggle_img=!t.toggle_img,t.toggle_info=!t.toggle_info})},t.show_hide=function(){t.toggle_img=!t.toggle_img,t.toggle_info=!t.toggle_info},t.next=function(){var e=+t.item.id+1;e=e>7?e-8:e,t.item=t.info[e]},t.prev=function(){var e=+t.item.id-1;e=e<0?e+8:e,t.item=t.info[e]}}]),myAngular.controller("loginCtrl",["$scope",function(t){t.registedInfo="已有帐号，直接登陆",t.login=function(){alert("该模块尚未开放，敬请期待！")},t.registed=function(){t.ifRegisted=!t.ifRegisted,"已有帐号，直接登陆"==t.registedInfo?t.registedInfo="突然又想注册一个帐号":t.registedInfo="已有帐号，直接登陆"}}]),myAngular.directive("s11",function(){return{restrict:"E",templateUrl:"../dist/tpls/s11.html"}});